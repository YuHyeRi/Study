# [**MySQL] ë‹¤ì¤‘í…Œì´ë¸”ì—°ì‚°_ì„œë¸Œì¿¼ë¦¬**

**ì„œë¸Œì¿¼ë¦¬(subquery)**

ì„œë¸Œì¿¼ë¦¬ë€ ë‹¤ë¥¸ ì¿¼ë¦¬ ë‚´ë¶€ì— í¬í•¨ë˜ì–´ ìˆëŠ” SELECTë¬¸ì„ ì˜ë¯¸í•œë‹¤.
ì„œë¸Œì¿¼ë¦¬ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ì¿¼ë¦¬ë¥¼ ì™¸ë¶€ì¿¼ë¦¬ë¼ê³  ë¶€ë¥´ë©°, ì„œë¸Œì¿¼ë¦¬ëŠ” ë‚´ë¶€ì¿¼ë¦¬ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.
ì„œë¸Œì¿¼ë¦¬ëŠ” ë°˜ë“œì‹œ ê´„í˜¸(())ë¡œ ê°ì‹¸ì ¸ ìˆì–´ì•¼ë§Œ í•œë‹¤.

MySQLì—ì„œ ì„œë¸Œì¿¼ë¦¬ë¥¼ í¬í•¨í•  ìˆ˜ ìˆëŠ” ì™¸ë¶€ì¿¼ë¦¬ëŠ” SELECT, INSERT, UPDATE, DELETE, SET, DOë¬¸
ì´ ìˆë‹¤.
ì´ëŸ¬í•œ ì„œë¸Œì¿¼ë¦¬ëŠ” ë˜ ë‹¤ì‹œ ë‹¤ë¥¸ ì„œë¸Œì¿¼ë¦¬ ì•ˆì— í¬í•¨ë  ìˆ˜ ìˆë‹¤.

ë‹¤ìŒ ì˜ˆì œëŠ” ì£¼ì†Œê°€ ì„œìš¸ì¸ ê³ ê°ì´ ì˜ˆì•½í•œ ì˜ˆì•½ ì •ë³´ë§Œì„ ì„ íƒí•˜ëŠ” ì˜ˆì œì´ë‹¤.

```sql
â‘  SELECT ID, ReserveDate, RoomNum
   FROM Reservation

â‘¡ WHERE Name IN (SELECT Name
                  FROM Customer
                  WHERE Address = 'ì„œìš¸')
```

[http://www.tcpschool.com/examples/tryit/tryMysql.php?filename=mysql_multipleTable_subquery_01](http://www.tcpschool.com/examples/tryit/tryMysql.php?filename=mysql_multipleTable_subquery_01)

ìœ„ì˜ ì˜ˆì œì—ì„œ â‘ ë²ˆ ë¼ì¸ì˜ SELECTë¬¸ì€ ì™¸ë¶€ì¿¼ë¦¬ì´ë©°, â‘¡ë²ˆ ë¼ì¸ì˜ SELECTë¬¸ì€ ì„œë¸Œì¿¼ë¦¬ì´ë‹¤.

ìš°ì„  â‘¡ë²ˆ ë¼ì¸ì˜ ì„œë¸Œì¿¼ë¦¬ê°€ ë¨¼ì € ì‹¤í–‰ë˜ì–´ Customer í…Œì´ë¸”ì˜ Address í•„ë“œì˜ ê°’ì´ 'ì„œìš¸'ì¸ 
ë ˆì½”ë“œì˜ Name í•„ë“œë¥¼ ëª¨ë‘ ì„ íƒí•œë‹¤.

ê·¸ë¦¬ê³ ì„œ â‘ ë²ˆ ë¼ì¸ì˜ ì™¸ë¶€ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ì–´ Reservation í…Œì´ë¸”ì—ì„œÂ ì„œë¸Œì¿¼ë¦¬ì— ì˜í•´ ì„ íƒëœ 
ê²°ê³¼ ì§‘í•©ì—Â í¬í•¨ëœ Name í•„ë“œì™€ ì¼ì¹˜í•˜ëŠ” ë ˆì½”ë“œë§Œì„ ë‹¤ì‹œ ì„ íƒí•œë‹¤.

---

**ì„œë¸Œì¿¼ë¦¬ì˜ íŠ¹ì§•**

ì„œë¸Œì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.

1. ì„œë¸Œì¿¼ë¦¬ëŠ” ì¿¼ë¦¬ë¥¼ êµ¬ì¡°í™”ì‹œí‚¤ë¯€ë¡œ, ì¿¼ë¦¬ì˜ ê° ë¶€ë¶„ì„ ëª…í™•íˆ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
2. ì„œë¸Œì¿¼ë¦¬ëŠ” ë³µì¡í•œ JOINì´ë‚˜ UNIONê³¼ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë˜ ë‹¤ë¥¸ ë°©ë²•ì„ ì œê³µí•œë‹¤.
3. ì„œë¸Œì¿¼ë¦¬ëŠ” ë³µì¡í•œ JOINì´ë‚˜ UNIONë³´ë‹¤ ì¢€ ë” ì½ê¸°ê°€ í¸í•˜ë‹¤.

ë‹¤ìŒ ì˜ˆì œëŠ” ìœ„ì—ì„œ ì‚´í´ë³¸ ì£¼ì†Œê°€ ì„œìš¸ì¸ ê³ ê°ì´ ì˜ˆì•½í•œ ì˜ˆì•½ ì •ë³´ë§Œì„ ì„ íƒí•˜ëŠ” ì˜ˆì œë¥¼ JOINì„ 
ì‚¬ìš©í•˜ì—¬Â í‘œí˜„í•œ ê²ƒì´ë‹¤.

ì¿¼ë¦¬ê°€ ë³µì¡í•œ ê²½ìš°ì—ëŠ” JOINì´ë‚˜ UNIONì„ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹  ì„œë¸Œì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ë…ì„± ì¸¡ë©´ì—ì„œ ë” ì¢‹ì„ ìˆ˜ ìˆë‹¤.

```sql
SELECT r.ID, r.ReserveDate, r.RoomNum
FROM Reservation AS r, Customer AS c
WHERE c.Address = 'ì„œìš¸' AND r.Name = c.Name;
```

ê·¸ëŸ¬ë‚˜ ì„œë¸Œì¿¼ë¦¬ì—ì„œ ì‚¬ìš©ëœ í…Œì´ë¸”ì´ë‚˜ ê·¸ ê²°ê³¼ ì§‘í•©ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤.

*ì˜ëª»ëœ ì˜ˆì œ*

```sql
UPDATE Reservation ...
WHERE ReverseDate = (SELECT ... FROM Reservation ...);
```

---

**FROMì ˆì˜ ì„œë¸Œì¿¼ë¦¬**

ì„œë¸Œì¿¼ë¦¬ëŠ” SELECTë¬¸ì˜ FROMì ˆì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ì´ ë•Œ ì„œë¸Œì¿¼ë¦¬ì— ì˜í•´ ì„ íƒëœ ê²°ê³¼ ì§‘í•©ì€ FROMì ˆì—ì„œ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œì¨ ì‚¬ìš©ëœë‹¤.

*ë¬¸ë²•*

```sql
SELECT ...
FROM (ì„œë¸Œì¿¼ë¦¬) [AS] ì´ë¦„
...
```

SELECTë¬¸ì˜ FROMì ˆì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  í…Œì´ë¸”ì—ëŠ” ì´ë¦„ì´ í•„ìš”í•˜ë‹¤.
ë”°ë¼ì„œ FROMì ˆì—ì„œ ì‚¬ìš©ë˜ëŠ” ì„œë¸Œì¿¼ë¦¬ëŠ” ìœ„ì˜ ë¬¸ë²•ì²˜ëŸ¼ ë°˜ë“œì‹œ ì´ë¦„ì„ ì •ì˜í•´ì•¼ë§Œ í•œë‹¤.

```sql
SELECT Name, ReservedRoom
â‘  FROM (SELECT Name, ReserveDate, (RoomNum + 1) AS ReservedRoom
         FROM Reservation
â‘¡       WHERE RoomNum > 1001) AS ReservationInfo;
```

[http://www.tcpschool.com/examples/tryit/tryMysql.php?filename=mysql_multipleTable_subquery_02](http://www.tcpschool.com/examples/tryit/tryMysql.php?filename=mysql_multipleTable_subquery_02)

ìœ„ì˜ ì˜ˆì œëŠ” ìš°ì„  â‘ ë²ˆ ë¼ì¸ì˜ ì„œë¸Œì¿¼ë¦¬ê°€ ë¨¼ì € ì‹¤í–‰ëœë‹¤.
í•´ë‹¹ ì„œë¸Œì¿¼ë¦¬ëŠ” Reservation í…Œì´ë¸”ì—ì„œ RoomNum í•„ë“œì˜ ê°’ì´ 1001 ì´ìƒì¸ ë ˆì½”ë“œë¥¼ ì°¾ì€ í›„ì—, RoomNum í•„ë“œê°’ì„ 1ì”© ì¦ê°€ì‹œí‚¨ë‹¤.
ê·¸ë¦¬ê³  í•´ë‹¹ ê²°ê³¼ ì§‘í•©ì€ â‘¡ë²ˆ ë¼ì¸ì—ì„œ ReservationInfoë¼ëŠ” ì´ë¦„ì˜ ì„ì‹œ í…Œì´ë¸”ë¡œ ë§Œë“¤ì–´ì§„ë‹¤.

ì™¸ë¶€ì¿¼ë¦¬ì—ì„œëŠ” ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ì„ì‹œ í…Œì´ë¸”ì—ì„œ Name, ReservedRoom í•„ë“œë§Œì„ ì„ íƒí•˜ê²Œ ëœë‹¤.

<br><br>
ğŸ‘‰ğŸ» ë…¸ì…˜ : https://www.notion.so/tgmary09/MySQL-_-475bf1722fa646d0b3e56dee6d585e9a
<br>
ğŸ‘‰ ì¶œì²˜ : [http://www.tcpschool.com/mysql/mysql_multipleTable_subquery](http://www.tcpschool.com/mysql/mysql_multipleTable_subquery)
